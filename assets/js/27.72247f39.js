(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{271:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"node-js-初识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-js-初识"}},[t._v("#")]),t._v(" Node.js 初识")]),t._v(" "),a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),a("p",[t._v("​ "),a("code",[t._v("Node.js")]),t._v("是一个让"),a("code",[t._v("JavaScript")]),t._v("运行在服务器端的开发平台，它让 JavaScript 的触角伸到了服务器端，可以与"),a("code",[t._v("PHP、JSP、Python、Ruby")]),t._v("平起平坐。")]),t._v(" "),a("p",[t._v("但 Node 似乎有点不同：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("**"),a("code",[t._v("Node.js")]),a("strong",[t._v("不是一种独立的语言")]),t._v("，与"),a("code",[t._v("PHP、JSP、Python、Perl、Ruby")]),t._v("的“既是语言，也是平台”不同，"),a("code",[t._v("Node.js")]),t._v("**使用"),a("code",[t._v("JavaScript")]),t._v("进行编程，运行在"),a("code",[t._v("JavaScript")]),t._v("引擎上（"),a("code",[t._v("V8")]),t._v("）。")])]),t._v(" "),a("li",[a("p",[t._v("与"),a("code",[t._v("PHP、JSP")]),t._v("等相比（"),a("code",[t._v("PHP、JSP、.net")]),t._v("都需要运行在服务器程序上，"),a("code",[t._v("Apache、Naginx、Tomcat、IIS")]),t._v("。")])])]),t._v(" "),a("p",[t._v("），"),a("strong",[a("code",[t._v("Node.js")]),t._v("跳过了"),a("code",[t._v("Apache、Naginx、IIS")]),t._v("等"),a("code",[t._v("HTTP")]),t._v("服务器，它自己不用建设在任何服务器软件之上")]),t._v("。"),a("code",[t._v("Node.js")]),t._v("的许多设计理念与经典架构（"),a("code",[t._v("LAMP = Linux + Apache + MySQL + PHP")]),t._v("）有着很大的不同，可以提供强大的伸缩能力。一会儿我们就将看到，"),a("code",[t._v("Node.js")]),t._v("没有 web 容器。")]),t._v(" "),a("h2",{attrs:{id:"特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[t._v("#")]),t._v(" 特点")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("单线程")])]),t._v(" "),a("p",[t._v("​ "),a("code",[t._v("node.js")]),t._v("是基于谷歌"),a("code",[t._v("v8")]),t._v("引擎孕育而生的一门“语言”，本质上仍然是"),a("code",[t._v("Javascript")]),t._v("，所以在执行机制上是单线程的。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("非阻塞 I/O")])]),t._v(" "),a("p",[t._v("​ 所谓"),a("strong",[t._v("I/O")]),t._v("（"),a("code",[t._v("input")]),t._v("/"),a("code",[t._v("output")]),t._v("）即数据库的读写操作，在常规"),a("code",[t._v("Apach、Java、PHP")]),t._v('搭建的服务器中，每新增一个"用户"，则会分出 2Mb 的内存去处理'),a("strong",[t._v("I/O")]),t._v("交互，这样会导致高并发的场景非常棘手。而在"),a("code",[t._v("node.js")]),t._v("中，凡是遇到"),a("strong",[t._v("I/O")]),t._v("操作，"),a("code",[t._v("node.js")]),t._v("可以将其列入到异步任务队列中，这样不影响主线程的任务，待异步任务完成时，再执行相应的逻辑，即"),a("strong",[t._v("事件驱动")]),t._v("。所以，"),a("code",[t._v("node.js")]),t._v("并不适用与复杂的数据计算等业务。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("事件驱动")])]),t._v(" "),a("p",[t._v("​ "),a("code",[t._v("node.js")]),t._v("的优点就是因为所有的交互都是可以异步来实现。在 Node 中，客户端请求建立连接，提交数据等行为，会触发相应的事件。在一个时刻，只能执行一个事件回调函数，但是在执行一个事件回调函数的中途，可以转而处理其他事件（比如，又有新用户连接了），然后返回继续执行原事件的回调函数，这种处理机制，称为“事件环”机制。")])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("Node.js")]),t._v("没有 web 容器")])]),t._v(" "),a("p",[t._v("​ 我们在"),a("code",[t._v("web")]),t._v("浏览器中访问"),a("code",[t._v("/static/imgs/01.png")]),t._v("或者"),a("code",[t._v("/static/css/style.css")]),t._v("路径查找资源时，后端通常是在"),a("code",[t._v("public")]),t._v("文件夹下建了类似"),a("code",[t._v("/static/imgs/...")]),t._v("或者"),a("code",[t._v("/statoc/css/...")]),t._v("这样的目录结构（web 容器），并配置路径与文件的映射关系，所以我们能在页面访问到。")]),t._v(" "),a("p",[t._v("​ 而很多人在学习"),a("code",[t._v("node.js")]),t._v("的时候也认为"),a("code",[t._v("node")]),t._v("服务器根目录中有一个"),a("code",[t._v("static")]),t._v("这样的文件夹，里面有我们放着我们需要的静态资源。实际上**"),a("code",[t._v("Node.js")]),t._v("没有 web 容器!!!**")]),t._v(" "),a("p",[t._v("​ 实际上我们输入以上路径时，"),a("code",[t._v("node")]),t._v("会根据"),a("code",[t._v("url")]),t._v("匹配不同的路径，做出相应：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" psth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/static/imgs/01.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"imgs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app has started at http://localhost:3000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("当我们访问"),a("code",[t._v("node.js")]),t._v("服务器中静态资源时，都要对路由（路径）做配置，否则就不能响应对应的资源。这也是"),a("code",[t._v("node.js")]),t._v("强大的地方，他的路由匹配是相当灵活的。")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);