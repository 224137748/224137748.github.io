(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{224:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"webpack-06-tree-shaking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-06-tree-shaking"}},[t._v("#")]),t._v(" webpack_06 Tree shaking")]),t._v(" "),a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),a("p",[t._v("​ 当一个"),a("code",[t._v("js")]),t._v("文件用"),a("code",[t._v("export")]),t._v("方法导出多个函数或者变量时，我们希望"),a("code",[t._v("webpack")]),t._v("只打包业务中引入的函数和变量，而不会将整个"),a("code",[t._v("js")]),t._v("文件打包。")]),t._v(" "),a("p",[a("strong",[t._v("注意： "),a("code",[t._v("Tree Shaking")]),t._v("只适用于"),a("code",[t._v("es6 Module")]),t._v("模块（静态引入），并不适用于"),a("code",[t._v("require.js")]),t._v("（动态引入）")])]),t._v(" "),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[a("code",[t._v("webpack")]),t._v("在"),a("code",[t._v("development")]),t._v("模式下是不会开启"),a("code",[t._v("tree shaking")]),t._v("的，生产环境默认开启，因此我们 需要添加以下代码：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("export "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  optimization"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    usedExports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("有时我们引用的"),a("code",[t._v("js")]),t._v("代码、"),a("code",[t._v("css")]),t._v("代码中没有导出任何东西，"),a("code",[t._v("import '@babel/poly-fill'")]),t._v("， "),a("code",[t._v("tree shaking")]),t._v("有可能将此文件忽略掉因此我们需要同时设置"),a("code",[t._v("package.json")]),t._v("文件，来消除上述情况。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// package.json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    “sideEffects”"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/poll-fill"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);